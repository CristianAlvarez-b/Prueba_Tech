<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Transacciones</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="assets/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <!-- ===== HEADER ===== -->
    <header id="main-header">
        <div class="header-left">
            <img src="assets/davivienda-logo.png" alt="Davivienda" id="logo">
        </div>
        <button id="logout-btn">Cerrar sesión</button>
    </header>

    <!-- ===== LOGIN ===== -->
    <!-- LOGIN + REGISTRO -->

    <!-- ===== LOGIN ===== -->
    <section id="login-section">
        <!-- Card del login -->
        <div id="login-card">
            <div>
                <h1>Iniciar Sesión</h1>
                <p>Ingresa tu usuario y contraseña para acceder al panel de gestión financiera.</p>

                <form id="login-form">
                    <div class="form-row">
                        <label>Usuario:</label>
                        <input type="text" id="login-username" placeholder="Tu usuario" required>
                    </div>
                    <div class="form-row">
                        <label>Contraseña:</label>
                        <input type="password" id="login-password" placeholder="Tu contraseña" required>
                    </div>
                    <button type="submit">Ingresar</button>
                </form>

                <p id="show-register-p">¿No tienes cuenta? <button id="show-register">Registrarse</button></p>

                <form id="register-form" style="display:none; margin-top: 15px;">
                    <div class="form-row">
                        <label>Usuario:</label>
                        <input type="text" id="register-username" placeholder="Nuevo usuario" required>
                    </div>
                    <div class="form-row">
                        <label>Email:</label>
                        <input type="email" id="register-email" placeholder="Correo electrónico" required>
                    </div>
                    <div class="form-row">
                        <label>Contraseña:</label>
                        <input type="password" id="register-password" placeholder="Contraseña" required>
                    </div>
                    <button type="submit">Crear cuenta</button>
                    <button type="button" id="cancel-register">Cancelar</button>
                </form>
            </div>
            <div id="login-illustration">
                <img src="assets/financial.jpg" alt="Ilustración financiera">
            </div>
        </div>

    </section>



    <!-- ===== DASHBOARD ===== -->
    <section id="dashboard" style="display:none;">

        <!-- Formulario de transacciones -->
        <section id="transaction-form">
            <h2>Crear / Editar Transacción</h2>
            <p>Ingresa los datos de tu transacción. Los campos marcados con * son obligatorios.</p>
            <form id="form-transaction">
                <input type="hidden" id="transaction-id">
                <div class="form-row">
                    <label>Fecha*:</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-row">
                    <label>Monto*:</label>
                    <input type="number" id="amount" placeholder="Monto en COP" required>
                </div>
                <div class="form-row">
                    <label>Categoría*:</label>
                    <input type="text" id="category" placeholder="Categoría" required>
                </div>
                <div class="form-row">
                    <label>Tipo*:</label>
                    <select id="type">
                        <option value="INCOME">Ingreso</option>
                        <option value="EXPENSE">Gasto</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Descripción:</label>
                    <input type="text" id="description" placeholder="Descripción (opcional)">
                </div>
                <div class="form-row-buttons">
                    <button type="submit">Guardar</button>
                    <button type="button" id="cancel-edit">Cancelar</button>
                </div>
            </form>
        </section>

        <hr>

        <!-- Filtros -->
        <section id="filters">
            <h2>Filtros</h2>
            <p>Filtra tus transacciones para analizarlas mejor.</p>
            <div class="form-row">
                <label>Desde:</label>
                <input type="date" id="filter-from">
                <label>Hasta:</label>
                <input type="date" id="filter-to">
            </div>
            <div class="form-row">
                <label>Categoría:</label>
                <input type="text" id="filter-category">
                <label>Tipo:</label>
                <select id="filter-type">
                    <option value="">Todos</option>
                    <option value="INCOME">Ingreso</option>
                    <option value="EXPENSE">Gasto</option>
                </select>
            </div>
            <div class="form-row">
                <label>Monto Mínimo:</label>
                <input type="number" id="filter-min">
                <label>Monto Máximo:</label>
                <input type="number" id="filter-max">
            </div>
            <div class="form-row-buttons">
                <button id="apply-filters">Aplicar filtros</button>
                <button id="reset-filters">Reset</button>
            </div>
        </section>

        <hr>

        <!-- Tabla de transacciones -->
        <section id="transaction-table">
            <h2>Lista de Transacciones</h2>
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Monto</th>
                        <th>Categoría</th>
                        <th>Tipo</th>
                        <th>Descripción</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </section>
        <div id="pagination-controls">
            <button id="prev-page">Anterior</button>
            <span id="page-info"></span>
            <button id="next-page">Siguiente</button>
        </div>

        <hr>
        <h2>Visualizaciones</h2>
        <p>Analiza tus transacciones con gráficos claros e interactivos.</p>
        <!-- Visualizaciones -->
        <section id="charts">

            <div class="chart-container">
                <canvas id="bar-chart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="pie-chart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="line-chart"></canvas>
            </div>
        </section>

        <!-- Indicadores clave -->
        <section id="analytics-panel">
            <h2>Indicadores Clave</h2>
            <div class="indicator-cards">
                <div class="indicator-card">
                    <p class="indicator-title">Gasto promedio mensual</p>
                    <p class="indicator-value" id="avg-expense">$0</p>
                </div>
                <div class="indicator-card">
                    <p class="indicator-title">Categorías más frecuentes</p>
                    <p class="indicator-value" id="top-categories">-</p>
                </div>
                <div class="indicator-card">
                    <p class="indicator-title">Variación mensual</p>
                    <p class="indicator-value" id="variations">-</p>
                </div>
                <div class="indicator-card">
                    <p class="indicator-title">Gastos atípicos</p>
                    <p class="indicator-value" id="outliers">-</p>
                </div>
            </div>
        </section>


    </section>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="app.js"></script>
</body>

</html>